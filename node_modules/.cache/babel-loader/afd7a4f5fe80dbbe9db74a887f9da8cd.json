{"remainingRequest":"/Users/tamunabachaliashvili/Desktop/vue-auth/node_modules/babel-loader/lib/index.js!/Users/tamunabachaliashvili/Desktop/vue-auth/node_modules/eslint-loader/index.js??ref--13-0!/Users/tamunabachaliashvili/Desktop/vue-auth/src/store.js","dependencies":[{"path":"/Users/tamunabachaliashvili/Desktop/vue-auth/src/store.js","mtime":1586357913284},{"path":"/Users/tamunabachaliashvili/Desktop/vue-auth/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tamunabachaliashvili/Desktop/vue-auth/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tamunabachaliashvili/Desktop/vue-auth/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICBzdGF0dXM6ICcnLAogICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpIHx8ICcnLAogICAgdXNlcjoge30KICB9LAogIG11dGF0aW9uczogewogICAgYXV0aF9yZXF1ZXN0OiBmdW5jdGlvbiBhdXRoX3JlcXVlc3Qoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJ2xvYWRpbmcnOwogICAgfSwKICAgIGF1dGhfc3VjY2VzczogZnVuY3Rpb24gYXV0aF9zdWNjZXNzKHN0YXRlLCB0b2tlbiwgdXNlcikgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnc3VjY2Vzcyc7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICAgIHN0YXRlLnVzZXIgPSB1c2VyOwogICAgfSwKICAgIGF1dGhfZXJyb3I6IGZ1bmN0aW9uIGF1dGhfZXJyb3Ioc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJ2Vycm9yJzsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnJzsKICAgICAgc3RhdGUudG9rZW4gPSAnJzsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBjb21taXQoJ2F1dGhfcmVxdWVzdCcpOwogICAgICAgIGF4aW9zKHsKICAgICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9sb2dpbicsCiAgICAgICAgICBkYXRhOiB1c2VyLAogICAgICAgICAgbWV0aG9kOiAnUE9TVCcKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICB2YXIgdG9rZW4gPSByZXNwLmRhdGEudG9rZW47CiAgICAgICAgICB2YXIgdXNlciA9IHJlc3AuZGF0YS51c2VyOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOyAvLyBBZGQgdGhlIGZvbGxvd2luZyBsaW5lOgoKICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB0b2tlbjsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9zdWNjZXNzJywgdG9rZW4sIHVzZXIpOwogICAgICAgICAgcmVzb2x2ZShyZXNwKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb21taXQoJ2F1dGhfZXJyb3InKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldHVzZXJzOiBmdW5jdGlvbiBnZXR1c2VycyhfcmVmMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbW1pdCgnYXV0aF9yZXF1ZXN0Jyk7CiAgICAgICAgYXhpb3MoewogICAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2dldHVzZXJzJywKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgY29uc29sZS5sb2cocmVzcC5kYXRhKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKTsgLy9jb25zdCB0b2tlbiA9IHJlc3AuZGF0YS50b2tlbgoKICAgICAgICAgIHZhciB1c2VycyA9IHJlc3AuZGF0YS51c2VyOyAvL2NvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykKICAgICAgICAgIC8vYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHRva2VuCgogICAgICAgICAgY29tbWl0KCdhdXRoX3N1Y2Nlc3MnLCB1c2Vycyk7IC8vY29tbWl0KCdhdXRoX3N1Y2Nlc3MnLCB0b2tlbiwgdXNlcnMpCgogICAgICAgICAgcmVzb2x2ZShyZXNwKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb21taXQoJ2F1dGhfZXJyb3InKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcihfcmVmMywgdXNlcikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbW1pdCgnYXV0aF9yZXF1ZXN0Jyk7CiAgICAgICAgYXhpb3MoewogICAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3JlZ2lzdGVyJywKICAgICAgICAgIGRhdGE6IHVzZXIsCiAgICAgICAgICBtZXRob2Q6ICdQT1NUJwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3AuZGF0YS50b2tlbjsKICAgICAgICAgIHZhciB1c2VyID0gcmVzcC5kYXRhLnVzZXI7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCB0b2tlbik7IC8vIEFkZCB0aGUgZm9sbG93aW5nIGxpbmU6CgogICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHRva2VuOwogICAgICAgICAgY29tbWl0KCdhdXRoX3N1Y2Nlc3MnLCB0b2tlbiwgdXNlcik7CiAgICAgICAgICByZXNvbHZlKHJlc3ApOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9lcnJvcicsIGVycik7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBjb21taXQoJ2xvZ291dCcpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBpc0xvZ2dlZEluOiBmdW5jdGlvbiBpc0xvZ2dlZEluKHN0YXRlKSB7CiAgICAgIHJldHVybiAhIXN0YXRlLnRva2VuOwogICAgfSwKICAgIGF1dGhTdGF0dXM6IGZ1bmN0aW9uIGF1dGhTdGF0dXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnN0YXR1czsKICAgIH0KICB9Cn0pOw=="},{"version":3,"sources":["/Users/tamunabachaliashvili/Desktop/vue-auth/src/store.js"],"names":["Vue","Vuex","axios","use","Store","state","status","token","localStorage","getItem","user","mutations","auth_request","auth_success","auth_error","logout","actions","login","commit","Promise","resolve","reject","url","data","method","then","resp","setItem","defaults","headers","common","catch","err","removeItem","getusers","console","log","users","register","getters","isLoggedIn","authStatus"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n        status: '',\n        token: localStorage.getItem('token') || '',\n        user: {}\n    },\n    mutations: {\n        auth_request(state) {\n            state.status = 'loading'\n        },\n        auth_success(state, token, user) {\n            state.status = 'success'\n            state.token = token\n            state.user = user\n        },\n        auth_error(state) {\n            state.status = 'error'\n        },\n        logout(state) {\n            state.status = ''\n            state.token = ''\n        },\n    },\n    actions: {\n        login({ commit }, user) {\n            return new Promise((resolve, reject) => {\n                commit('auth_request')\n                axios({ url: 'http://localhost:3000/login', data: user, method: 'POST' })\n                    .then(resp => {\n                        const token = resp.data.token\n                        const user = resp.data.user\n                        localStorage.setItem('token', token)\n                        // Add the following line:\n                        axios.defaults.headers.common['Authorization'] = token\n                        commit('auth_success', token, user)\n                        resolve(resp)\n                    })\n                    .catch(err => {\n                        commit('auth_error')\n                        localStorage.removeItem('token')\n                        reject(err)\n                    })\n            })\n        },\n        getusers({ commit }) {\n            return new Promise((resolve, reject) => {\n                commit('auth_request')\n                axios({ url: 'http://localhost:3000/getusers',  method: 'POST' })\n                    .then(resp => {\n                        console.log(resp.data)\n                        console.log(localStorage.getItem('token'))\n                        //const token = resp.data.token\n                        const users = resp.data.user\n                        //const token = localStorage.getItem('token')\n                        //axios.defaults.headers.common['Authorization'] = token\n                        commit('auth_success',  users)\n                        //commit('auth_success', token, users)\n\n                        resolve(resp)\n                    })\n                    .catch(err => {\n                        commit('auth_error')\n                        localStorage.removeItem('token')\n                        reject(err)\n                    })\n            })\n        },\n        register({ commit }, user) {\n            return new Promise((resolve, reject) => {\n                commit('auth_request')\n                axios({ url: 'http://localhost:3000/register', data: user, method: 'POST' })\n                    .then(resp => {\n                        const token = resp.data.token\n                        const user = resp.data.user\n                        localStorage.setItem('token', token)\n                        // Add the following line:\n                        axios.defaults.headers.common['Authorization'] = token\n                        commit('auth_success', token, user)\n                        resolve(resp)\n                    })\n                    .catch(err => {\n                        commit('auth_error', err)\n                        localStorage.removeItem('token')\n                        reject(err)\n                    })\n            })\n        },\n        logout({ commit }) {\n            // eslint-disable-next-line no-unused-vars\n            return new Promise((resolve, reject) => {\n                commit('logout')\n                localStorage.removeItem('token')\n                delete axios.defaults.headers.common['Authorization']\n                resolve()\n            })\n        }\n    },\n    getters: {\n        isLoggedIn: state => !!state.token,\n        authStatus: state => state.status,\n    }\n})\n"]}]}